<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Padala Foods — Demo Food Delivery</title>
  <style>
    :root{--accent:#ff6b6b;--muted:#666;--bg:#f7f7f8}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, sans-serif;margin:0;background:var(--bg);color:#111}
    header{background:linear-gradient(90deg,#fff 0,#fff 60%, rgba(255,107,107,0.06) 100%);padding:18px 20px;display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:44px;height:44px;border-radius:8px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .container{max-width:980px;margin:28px auto;padding:0 20px}
    .card{background:white;border-radius:12px;box-shadow:0 6px 18px rgba(20,20,50,0.06);padding:18px}
    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px}
    .steps{display:flex;gap:8px;margin-bottom:12px}
    .step{padding:8px 12px;border-radius:999px;background:#fff;border:1px solid #eee;font-size:14px;color:var(--muted)}

    /* Food options */
    .options{display:flex;gap:12px}
    .option{flex:1;padding:18px;border-radius:12px;border:2px dashed #eee;text-align:center;cursor:pointer}
    .option.selected{border-style:solid;border-color:var(--accent);box-shadow:0 6px 20px rgba(255,107,107,0.08)}

    /* Buttons */
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(255,107,107,0.15)}

    /* Right column (cart/flow) */
    .flow{display:flex;flex-direction:column;gap:12px}
    .mini{font-size:13px;color:var(--muted)}

    /* Modal (signup / signin / payment) */
    .modal-backdrop{position:fixed;inset:0;background:rgba(12,12,20,0.4);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{width:100%;max-width:420px;background:white;border-radius:12px;padding:18px}
    .form-row{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
    input[type="text"],input[type="email"],input[type="password"],select{padding:10px;border-radius:8px;border:1px solid #e6e6e9}

    /* confirmed / feedback */
    .center{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;text-align:center}

    footer{padding:18px;text-align:center;color:var(--muted);font-size:13px}

    @media (max-width:880px){.grid{grid-template-columns:1fr;}.brand span{display:none}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">PF</div>
      <div>
        <div style="font-weight:700">Padala Foods</div>
        <div class="mini">Demo — Food Delivery Flow</div>
      </div>
    </div>
    <div>
      <button class="btn ghost" id="openSignUp">Sign up</button>
      <button class="btn" id="openSignIn">Sign in</button>
    </div>
  </header>

  <main class="container">
    <div class="card grid">
      <section>
        <div class="steps">
          <div class="step">1. Auth</div>
          <div class="step">2. Choose</div>
          <div class="step">3. Order</div>
          <div class="step">4. Pay</div>
          <div class="step">5. Confirm</div>
          <div class="step">6. Feedback</div>
        </div>

        <h2>Choose your food type</h2>
        <p class="mini">(This demo follows your flowchart: Sign up → Sign in → Veg/Non‑veg → Place order → Process payment → Order confirmed → Feedback)</p>

        <div class="options" id="foodOptions">
          <div class="option" data-type="veg">
            <h3>Veg</h3>
            <p class="mini">Vegetarian dishes</p>
          </div>
          <div class="option" data-type="nonveg">
            <h3>Non‑Veg</h3>
            <p class="mini">Meat & seafood</p>
          </div>
        </div>

        <div style="margin-top:18px;display:flex;gap:10px;align-items:center">
          <button class="btn" id="placeOrderBtn">Place order</button>
          <div class="mini">Selected: <span id="selectedType">None</span></div>
        </div>

        <hr style="margin:18px 0">
        <div id="contentArea">
          <!-- dynamic content like menus, payment, confirmation, feedback will appear here -->
        </div>
      </section>

      <aside>
        <div class="card flow">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div><strong>Cart</strong><div class="mini">Items added will show here</div></div>
            <div id="userBadge" class="mini">Not signed in</div>
          </div>

          <div id="cartItems" style="min-height:90px"></div>

          <div style="margin-top:auto">
            <div class="mini">Total:</div>
            <div style="font-weight:700;font-size:18px" id="totalAmt">₹0</div>
            <div style="margin-top:10px">
              <button class="btn ghost" id="goToPayment">Proceed to payment</button>
            </div>
          </div>
        </div>

        <div style="margin-top:12px;text-align:center" class="mini card">
          Demo store. No real payments. Uses localStorage to simulate flow.
        </div>
      </aside>
    </div>

    <div style="margin-top:18px" class="card">
      <h3>Flowchart steps (visual)</h3>
      <ol>
        <li>Sign up / Sign in — user must register or login (demo stored locally)</li>
        <li>Choose Veg / Non‑veg</li>
        <li>Place order — choose a dish & add to cart</li>
        <li>Process payment — simulated</li>
        <li>Order confirmed — shows order id
        <li>Feedback — simple rating + text</li>
      </ol>
    </div>
  </main>

  <footer>
    © Padala Foods demo — built for learning. Need a backend? Ask me to add Node + MongoDB.
  </footer>

  <!-- Modals -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal" id="modalContent"></div>
  </div>

  <script>
    // Simple demo logic (no backend). Follows flowchart the user provided.
    // Data stored in localStorage: users (object map), session (email), cart, orders

    const qs = s => document.querySelector(s);
    const qsa = s => document.querySelectorAll(s);

    // Utils
    function showModal(html){qs('#modalContent').innerHTML = html; qs('#modalBackdrop').style.display = 'flex';}
    function closeModal(){qs('#modalBackdrop').style.display = 'none'; qs('#modalContent').innerHTML='';}

    // User storage helpers
    function loadUsers(){return JSON.parse(localStorage.getItem('pf_users')||'{}')}
    function saveUsers(u){localStorage.setItem('pf_users', JSON.stringify(u))}
    function setSession(email){localStorage.setItem('pf_session', email); renderUserBadge()}
    function getSession(){return localStorage.getItem('pf_session')}
    function logout(){localStorage.removeItem('pf_session'); renderUserBadge()}

    // Cart helpers
    function getCart(){return JSON.parse(localStorage.getItem('pf_cart')||'[]')}
    function saveCart(c){localStorage.setItem('pf_cart', JSON.stringify(c)); renderCart()}

    // Orders
    function getOrders(){return JSON.parse(localStorage.getItem('pf_orders')||'[]')}
    function saveOrders(o){localStorage.setItem('pf_orders', JSON.stringify(o))}

    // Render user badge
    function renderUserBadge(){const email=getSession(); if(email){qs('#userBadge').textContent = email + ' • signed in';} else {qs('#userBadge').textContent = 'Not signed in'}}

    // Sign up / Sign in modals
    qs('#openSignUp').addEventListener('click', ()=>{
      showModal(`<h3>Create account</h3>
        <div class='form-row'><label>Name</label><input id='su_name' type='text' placeholder='Your name'></div>
        <div class='form-row'><label>Email</label><input id='su_email' type='email' placeholder='you@mail.com'></div>
        <div class='form-row'><label>Password</label><input id='su_pass' type='password' placeholder='password'></div>
        <div style='display:flex;gap:8px;justify-content:flex-end'><button class='btn ghost' id='closeModalBtn'>Cancel</button><button class='btn' id='doSignUp'>Sign up</button></div>
        `);
      qs('#closeModalBtn').addEventListener('click', closeModal);
      qs('#doSignUp').addEventListener('click', ()=>{
        const name = qs('#su_name').value.trim(); const email=qs('#su_email').value.trim(); const pass=qs('#su_pass').value;
        if(!name||!email||!pass){alert('Please complete all fields');return}
        const users = loadUsers(); if(users[email]){alert('User already exists — sign in instead');return}
        users[email] = {name, email, pass}; saveUsers(users); setSession(email); closeModal(); alert('Signed up and signed in as '+email);
      })
    })

    qs('#openSignIn').addEventListener('click', ()=>{
      showModal(`<h3>Sign in</h3>
        <div class='form-row'><label>Email</label><input id='si_email' type='email' placeholder='you@mail.com'></div>
        <div class='form-row'><label>Password</label><input id='si_pass' type='password'></div>
        <div style='display:flex;gap:8px;justify-content:flex-end'><button class='btn ghost' id='closeModalBtn2'>Cancel</button><button class='btn' id='doSignIn'>Sign in</button></div>
        <div style='margin-top:8px;text-align:center' class='mini'>Don't have an account? <a href='#' id='switchToSignUp'>Sign up</a></div>
        `);
      qs('#closeModalBtn2').addEventListener('click', closeModal);
      qs('#switchToSignUp').addEventListener('click', ()=>{closeModal(); qs('#openSignUp').click()});
      qs('#doSignIn').addEventListener('click', ()=>{
        const email=qs('#si_email').value.trim(); const pass=qs('#si_pass').value;
        const users = loadUsers(); if(!users[email]||users[email].pass !== pass){alert('Invalid credentials');return}
        setSession(email); closeModal(); alert('Signed in as '+email);
      })
    })

    // Food option selection
    let selectedType = null;
    qsa('.option').forEach(el=>el.addEventListener('click', ()=>{
      qsa('.option').forEach(o=>o.classList.remove('selected'));
      el.classList.add('selected'); selectedType = el.dataset.type; qs('#selectedType').textContent = selectedType;
      renderMenuFor(selectedType);
    }));

    // Render sample menu based on veg/nonveg
    function renderMenuFor(type){
      const menus = {
        veg:[{id:'v1',name:'Paneer Butter Masala',price:160},{id:'v2',name:'Veg Biryani',price:120}],
        nonveg:[{id:'n1',name:'Chicken Curry',price:190},{id:'n2',name:'Fish Fry',price:170}]
      }
      const data = menus[type]||[];
      const html = `<h3>Menu — ${type||'—'}</h3>` + (data.length? (`<div style="display:grid;gap:8px">${data.map(d=>`<div style="display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;border:1px solid #f0f0f0"><div><strong>${d.name}</strong><div class='mini'>₹${d.price}</div></div><div><button class='btn ghost' data-id='${d.id}' data-name='${d.name}' data-price='${d.price}'>Add</button></div></div>`).join('')}</div>`):'<div class="mini">No items</div>');
      qs('#contentArea').innerHTML = html;
      qsa('#contentArea .btn').forEach(b=>b.addEventListener('click', ()=>{
        const item = {id:b.dataset.id,name:b.dataset.name,price:parseInt(b.dataset.price),qty:1};
        const cart = getCart(); cart.push(item); saveCart(cart); alert(item.name + ' added to cart');
      }))
    }

    // Place order button (moves user to add items — if no selection, remind)
    qs('#placeOrderBtn').addEventListener('click', ()=>{
      if(!getSession()){ if(confirm('You need to sign in to place an order. Sign in now?')) qs('#openSignIn').click(); return }
      if(!selectedType){alert('Please choose Veg or Non‑Veg first'); return}
      // show menu if not shown
      renderMenuFor(selectedType);
      window.scrollTo({top:0,behavior:'smooth'});
    })

    // Render cart
    function renderCart(){
      const cart = getCart(); const el = qs('#cartItems'); el.innerHTML = '';
      if(cart.length===0){el.innerHTML = '<div class="mini">Cart is empty</div>'; qs('#totalAmt').textContent='₹0'; return}
      cart.forEach((c,i)=>{
        const row = document.createElement('div'); row.style.display='flex'; row.style.justifyContent='space-between'; row.style.alignItems='center'; row.style.padding='6px 0';
        row.innerHTML = `<div><strong>${c.name}</strong><div class='mini'>₹${c.price} x ${c.qty}</div></div><div><button class='btn ghost' data-index='${i}'>Remove</button></div>`;
        el.appendChild(row);
      })
      const total = cart.reduce((s,it)=>s + it.price*it.qty,0); qs('#totalAmt').textContent = '₹'+ total;
      qsa('#cartItems .btn').forEach(b=>b.addEventListener('click', ()=>{
        const i = parseInt(b.dataset.index); const cart = getCart(); cart.splice(i,1); saveCart(cart);
      }))
    }

    // Proceed to payment (simulated)
    qs('#goToPayment').addEventListener('click', ()=>{
      if(!getSession()){ if(confirm('You need to sign in to pay. Sign in now?')) qs('#openSignIn').click(); return }
      const cart = getCart(); if(cart.length===0){alert('Cart is empty — add items first'); return}
      showPaymentModal();
    })

    function showPaymentModal(){
      const cart = getCart(); const total = cart.reduce((s,it)=>s + it.price*it.qty,0);
      showModal(`<h3>Payment — ₹${total}</h3>
        <div class='form-row'><label>Payment method</label><select id='pmethod'><option>Card</option><option>UPI</option><option>Cash on delivery</option></select></div>
        <div class='form-row'><label>Enter mock details (demo)</label><input id='pdetails' placeholder='Card/UPI details'></div>
        <div style='display:flex;justify-content:flex-end;gap:8px'><button class='btn ghost' id='cancelPay'>Cancel</button><button class='btn' id='doPay'>Pay</button></div>
        `)
      qs('#cancelPay').addEventListener('click', closeModal);
      qs('#doPay').addEventListener('click', ()=>{
        // simulate processing
        const order = {id: 'PF' + Math.floor(Math.random()*90000+10000), user:getSession(), items:getCart(), total:total, status:'confirmed', placedAt: new Date().toISOString()}
        const os = getOrders(); os.push(order); saveOrders(os);
        // clear cart
        saveCart([]);
        closeModal(); renderOrderConfirmation(order);
      })
    }

    function renderOrderConfirmation(order){
      qs('#contentArea').innerHTML = `<div class='center'><h3>Order Confirmed ✅</h3><div class='mini'>Order id: <strong>${order.id}</strong></div><div class='mini'>Total: ₹${order.total}</div><div class='mini'>Placed at: ${new Date(order.placedAt).toLocaleString()}</div><div style='margin-top:12px'><button class='btn' id='leaveFeedback'>Leave feedback</button></div></div>`;
      qs('#leaveFeedback').addEventListener('click', ()=>{renderFeedbackForm(order.id)})
    }

    function renderFeedbackForm(orderId){
      qs('#contentArea').innerHTML = `<div class='card center'><h3>Feedback for ${orderId}</h3>
        <div class='mini'>How was your order?</div>
        <div style='display:flex;gap:8px;margin-top:8px'><button class='btn ghost' data-rating='1'>😞</button><button class='btn ghost' data-rating='2'>😐</button><button class='btn ghost' data-rating='3'>😊</button></div>
        <div style='margin-top:10px' class='form-row'><textarea id='fb_text' rows='4' placeholder='Write a short feedback'></textarea></div>
        <div style='display:flex;gap:8px;justify-content:center'><button class='btn ghost' id='skipFb'>Skip</button><button class='btn' id='submitFb'>Submit</button></div>
        </div>`;
      qsa('[data-rating]').forEach(b=>b.addEventListener('click', ()=>{const r=b.dataset.rating; qs('#fb_text').value = (r==3? 'Great! Loved it.' : r==2? 'It was okay.' : 'Not satisfied.');}))
      qs('#skipFb').addEventListener('click', ()=>{qs('#contentArea').innerHTML = `<div class='center'><h3>Thank you!</h3><div class='mini'>Flow finished.</div></div>`})
      qs('#submitFb').addEventListener('click', ()=>{
        const fb = qs('#fb_text').value.trim(); const orders = getOrders(); const o = orders.find(x=>x.id==orderId); if(!o){alert('Order not found'); return}
        o.feedback = fb; saveOrders(orders); qs('#contentArea').innerHTML = `<div class='center'><h3>Feedback received</h3><div class='mini'>Thanks for helping us improve.</div></div>`
      })
    }

    // Initial render
    renderUserBadge(); renderCart();

    // Close modal when clicking outside
    qs('#modalBackdrop').addEventListener('click', (e)=>{ if(e.target===qs('#modalBackdrop')) closeModal() })

    // Seed demo user for convenience
    (function seed(){
      const users = loadUsers(); if(!users['demo@padala.test']){ users['demo@padala.test']={name:'Demo User',email:'demo@padala.test',pass:'demo123'}; saveUsers(users)}
    })();
  </script>
</body>
</html>
